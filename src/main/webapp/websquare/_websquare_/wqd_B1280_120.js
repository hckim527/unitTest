"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[120],{6739:(t,e,i)=>{i.r(e),i.d(e,{repeat:()=>s,repeatAPI:()=>p});var n=i(1570),o=i(866),r=i(2847),u=i(6323),a=i(3885),p={getRepeatIndex:function(){return this.__repeat.repeatComponents[this.id].repeatIndex},getSiblingId:function(t){var e=this.getRepeatIndex();return this.__repeat.repeatIds[e].hashPreFix+t},getSibling:function(t){var e=this.getRepeatIndex(),i=this.__repeat.repeatIds[e];return u.Z.getComponentById(i.hashPreFix+t,this.scope_id)},getRepeatInstanceNode:function(){var t=this.getRepeatIndex(),e=this.__repeat.nodeset+"[@"+this.__repeat.options.repeatKey+"='"+t+"']";return WebSquare.ModelUtil.findInstanceNode(e,void 0,this.scope_id)},getInstanceValue:function(){return WebSquare.ModelUtil.getInstanceValue(this.options.ref)},getRepeat:function(){return this.__repeat}},s=function(t,e,i){a.q.call(this,t,e,i)};s.prototype.initAsync=async function(){try{for(var t=["uiplugin.balloonTip","uiplugin.group","uiplugin.wframe","uiplugin.textbox","uiplugin.anchor","uiplugin.selectbox","uiplugin.input","uiplugin.span","uiplugin.calendar","uiplugin.inputCalendar","uiplugin.textarea","uiplugin.checkcombobox","uiplugin.autoComplete","uiplugin.list","uiplugin.floatingLayer","uiplugin.radio","uiplugin.spinner","uiplugin.gridView","uiplugin.grid","uiplugin.trigger","uiplugin.button","uiplugin.image","uiplugin.pageList","uiplugin.tabControl","uiplugin.generator","uiplugin.upload","uiplugin.treeview","uiplugin.treeview_virtual","uiplugin.checkbox","uiplugin.output","uiplugin.window","uiplugin.windowContainer","uiplugin.accordion","uiplugin.widgetContainer","uiplugin.panelContainer","uiplugin.mapchart","uiplugin.gridLayout","uiplugin.udc","uiplugin.mapchart","uiplugin.pivot","uiplugin.editor","uiplugin.multiupload","uiplugin.fusionchart","uiplugin.fwFunnelChart","uiplugin.fwPyramidChart","uiplugin.fwSparkChart","uiplugin.fwGaugeChart","uiplugin.fwGanttChart","uiplugin.fwRealtimeChart","uiplugin.fwBulletChart","uiplugin.spinPicker","uiplugin.datePicker","uiplugin.slider","uiplugin.searchbox","uiplugin.fliptoggle","uiplugin.pageControl","uiplugin.repeat","uiplugin.graphicUtil","uiplugin.roundRectangle","uiplugin.multiselect","uiplugin.Switch","uiplugin.slideHide","uiplugin.iframe","uiplugin.layer","uiplugin.pageInherit","uiplugin.scrollView","uiplugin.scheduleCalendar","uiplugin.progressbar"],e=[],i=0;i<t.length;i++)e.push(n.q._loadModuleDynamic(t[i]));await Promise.all(e)}catch(t){o.Y.printStackTrace(t)}},n.q.extend(s.prototype,a.q.prototype),s.prototype.defaultOptions={pluginType:"uiplugin.repeat",pluginName:"repeat",userEvents:["onrepeatdone"],nodeset:"",repeatKey:"index",cols:"",rows:"",autoCount:!1,direction:"horizontal"},s.prototype.initialize=function(t){try{this.repeatComponents={},this.repeatIds=[],this.templateElement=t,this.rowCount=void 0,this.colCount=void 0}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2repeat "+this.options.className+"' "+i+">"),t.push("</div>"),t.join("")}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.setAction=function(){try{this.refreshRepeat()}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.refreshItemset=function(){try{this.refreshRepeat()}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.drawContents=function(){try{var t=[];t.push("<table class='w2repeat_table'>");for(var e=this.getChildren(),i=e.length,n=0;n<this.rowCount;n++){t.push("<tr class='w2repeat_row'>");for(var r=0;r<this.colCount;r++){var u=n*this.colCount+r;"vertical"==this.options.direction&&(u=n+this.rowCount*r),u<i?(t.push("<td class=''>"),t.push(e[u].toHTML()),t.push("</td>")):t.push("<td class=''></td>")}t.push("</tr>")}t.push("</table>"),this.render.innerHTML=t.join("");for(var a=0;a<e.length;a++)e[a].activate(),
e[a].onComplete()}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.refreshRepeat=function(){try{if(""!=this.options.nodeset){if(this.nodeset=this.options.nodeset,this.nodeset.match("data:")){this.modelControl.setItemset(this.nodeset,"",""),this.modelControl.getDataCollectionItemsetData(this.modelControl.id);var t=this.modelControl.getDataComp();this.nodeset=this.uuid+"/"+t.options.baseNode+"/"+t.options.repeatNode,WebSquare.ModelUtil.setInstanceNode(t.getAllXML(),this.uuid,"","replace",void 0,this.scope_id)}var e=WebSquare.ModelUtil.findInstanceNodes(this.nodeset,null,this.scope_id);this.initialize(this.templateElement);for(var i=this.childControlList.length-1;i>=0;i--)this.childControlList[i].remove();if(e.length>0){for(i=0;i<e.length;i++)this.parseChild(this,this.templateElement,i);if(this.setTableCount(),1==this.options.autoCount)for(i=0;i<e.length;i++)e[i].setAttribute(this.options.repeatKey,i);this.drawContents(),r.f.fireEvent(this,"onrepeatdone")}}}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.setTableCount=function(){try{var t=this.getChildrenCount();if(this.rowCount=t,this.colCount=1,""!=this.options.rows){var e=parseInt(this.options.rows);this.rowCount=e,this.colCount=Math.ceil(t/e)}if(""!=this.options.cols){var i=parseInt(this.options.cols);this.colCount=i,this.rowCount=Math.ceil(t/i)}}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.parseChild=function(t,e,i){try{for(var r=e.getChildNodes(),a=0;a<r.length;a++){var p=r[a];if(1==p.nodeType){var s=p.getLocalName(),l=p.getAttribute("id"),h=p.getAttribute("ref");if("repeat"==s&&(h=p.getAttribute("nodeset")),h){var c=h.indexOf("data:");c>=0&&(h=h.slice(5+c))}if(l){var d=this.id+"_"+i+"_"+l;h=h?this.nodeset+"[@"+this.options.repeatKey+"='"+i+"']/"+h:"";var g=null;"repeat"==s?(g=WebSquare.controlFactory.createByJSON(d,null,p._element,this.scope_obj,this.parentFrame)).options.nodeset=h:(g=WebSquare.controlFactory.createControl(d,{ref:h},p._element,this.scope_obj),this.parseChild(g,p,i)),t.addControl(g),this.repeatComponents[d]={},this.repeatComponents[d].repeatIndex=i,this.repeatIds[i]={},this.repeatIds[i].hashPreFix=this.id+"_"+i+"_",u.Z.getComponentById(d,this.scope_id).__repeat=this,n.q.extend(u.Z.getComponentById(d,this.scope_id),WebSquare.uiplugin.repeatAPI)}}}}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.getRepeatChildren=function(t){try{for(var e=[],i=this.getChildrenCount(),n=0;n<i;n++){var r=this.id+"_"+n+"_"+t;e.push(u.Z.getComponentById(r,this.scope_id))}return e}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.setInitValue=function(t){try{this.init(t)}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.init=function(t){try{t=n.q.extend({excludePlugin:"",excludeId:"",fireEvent:!1},t||{});for(var e=this.getChildren(),i=0;i<e.length;i++)e[i].setInitValue&&-1==(" "+t.excludePlugin+" ").indexOf(" "+e[i].options.pluginName+" ")&&-1==(" "+t.excludeId+" ").indexOf(" "+e[i].id+" ")&&e[i].setInitValue(t)}catch(t){o.Y.printStackTrace(t,null,this)}},s.prototype.invoke=function(t,e,i,n){try{return a.q.prototype.invoke.call(this,t,e,i,n)}catch(t){o.Y.printStackTrace(t,null,this)}}}}]);