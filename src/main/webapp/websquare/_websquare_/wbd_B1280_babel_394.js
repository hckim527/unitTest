"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[394],{8394:function(t,e,i){i.r(e),i.d(e,{repeat:function(){return c},repeatAPI:function(){return h}});var n=i(467),o=i(4756),r=i.n(o),u=i(5461),a=i(8971),p=i(2338),s=i(1204),l=i(2406),h={getRepeatIndex:function(){return this.__repeat.repeatComponents[this.id].repeatIndex},getSiblingId:function(t){var e=this.getRepeatIndex();return this.__repeat.repeatIds[e].hashPreFix+t},getSibling:function(t){var e=this.getRepeatIndex(),i=this.__repeat.repeatIds[e];return s.Z.getComponentById(i.hashPreFix+t,this.scope_id)},getRepeatInstanceNode:function(){var t=this.getRepeatIndex(),e=this.__repeat.nodeset+"[@"+this.__repeat.options.repeatKey+"='"+t+"']";return WebSquare.ModelUtil.findInstanceNode(e,void 0,this.scope_id)},getInstanceValue:function(){return WebSquare.ModelUtil.getInstanceValue(this.options.ref)},getRepeat:function(){return this.__repeat}},c=function(t,e,i){l.q.call(this,t,e,i)};c.prototype.initAsync=(0,n.A)(r().mark((function t(){var e,i,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=["uiplugin.balloonTip","uiplugin.group","uiplugin.wframe","uiplugin.textbox","uiplugin.anchor","uiplugin.selectbox","uiplugin.input","uiplugin.span","uiplugin.calendar","uiplugin.inputCalendar","uiplugin.textarea","uiplugin.checkcombobox","uiplugin.autoComplete","uiplugin.list","uiplugin.floatingLayer","uiplugin.radio","uiplugin.spinner","uiplugin.gridView","uiplugin.grid","uiplugin.trigger","uiplugin.button","uiplugin.image","uiplugin.pageList","uiplugin.tabControl","uiplugin.generator","uiplugin.upload","uiplugin.treeview","uiplugin.treeview_virtual","uiplugin.checkbox","uiplugin.output","uiplugin.window","uiplugin.windowContainer","uiplugin.accordion","uiplugin.widgetContainer","uiplugin.panelContainer","uiplugin.mapchart","uiplugin.gridLayout","uiplugin.udc","uiplugin.mapchart","uiplugin.pivot","uiplugin.editor","uiplugin.multiupload","uiplugin.fusionchart","uiplugin.fwFunnelChart","uiplugin.fwPyramidChart","uiplugin.fwSparkChart","uiplugin.fwGaugeChart","uiplugin.fwGanttChart","uiplugin.fwRealtimeChart","uiplugin.fwBulletChart","uiplugin.spinPicker","uiplugin.datePicker","uiplugin.slider","uiplugin.searchbox","uiplugin.fliptoggle","uiplugin.pageControl","uiplugin.repeat","uiplugin.graphicUtil","uiplugin.roundRectangle","uiplugin.multiselect","uiplugin.Switch","uiplugin.slideHide","uiplugin.iframe","uiplugin.layer","uiplugin.pageInherit","uiplugin.scrollView","uiplugin.scheduleCalendar","uiplugin.progressbar"],i=[],n=0;n<e.length;n++)i.push(u.q._loadModuleDynamic(e[n]));return t.next=6,Promise.all(i);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a.Y.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),u.q.extend(c.prototype,l.q.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.repeat",pluginName:"repeat",userEvents:["onrepeatdone"],nodeset:"",repeatKey:"index",cols:"",rows:"",autoCount:!1,direction:"horizontal"},c.prototype.initialize=function(t){try{this.repeatComponents={},this.repeatIds=[],this.templateElement=t,this.rowCount=void 0,this.colCount=void 0}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2repeat "+this.options.className+"' "+i+">"),t.push("</div>"),t.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{this.refreshRepeat()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{this.refreshRepeat()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.drawContents=function(){try{var t=[];t.push("<table class='w2repeat_table'>");for(var e=this.getChildren(),i=e.length,n=0;n<this.rowCount;n++){t.push("<tr class='w2repeat_row'>");for(var o=0;o<this.colCount;o++){
var r=n*this.colCount+o;"vertical"==this.options.direction&&(r=n+this.rowCount*o),r<i?(t.push("<td class=''>"),t.push(e[r].toHTML()),t.push("</td>")):t.push("<td class=''></td>")}t.push("</tr>")}t.push("</table>"),this.render.innerHTML=t.join("");for(var u=0;u<e.length;u++)e[u].activate(),e[u].onComplete()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.refreshRepeat=function(){try{if(""!=this.options.nodeset){if(this.nodeset=this.options.nodeset,this.nodeset.match("data:")){this.modelControl.setItemset(this.nodeset,"",""),this.modelControl.getDataCollectionItemsetData(this.modelControl.id);var t=this.modelControl.getDataComp();this.nodeset=this.uuid+"/"+t.options.baseNode+"/"+t.options.repeatNode,WebSquare.ModelUtil.setInstanceNode(t.getAllXML(),this.uuid,"","replace",void 0,this.scope_id)}var e=WebSquare.ModelUtil.findInstanceNodes(this.nodeset,null,this.scope_id);this.initialize(this.templateElement);for(var i=this.childControlList.length-1;i>=0;i--)this.childControlList[i].remove();if(e.length>0){for(i=0;i<e.length;i++)this.parseChild(this,this.templateElement,i);if(this.setTableCount(),1==this.options.autoCount)for(i=0;i<e.length;i++)e[i].setAttribute(this.options.repeatKey,i);this.drawContents(),p.f.fireEvent(this,"onrepeatdone")}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setTableCount=function(){try{var t=this.getChildrenCount();if(this.rowCount=t,this.colCount=1,""!=this.options.rows){var e=parseInt(this.options.rows);this.rowCount=e,this.colCount=Math.ceil(t/e)}if(""!=this.options.cols){var i=parseInt(this.options.cols);this.colCount=i,this.rowCount=Math.ceil(t/i)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.parseChild=function(t,e,i){try{for(var n=e.getChildNodes(),o=0;o<n.length;o++){var r=n[o];if(1==r.nodeType){var p=r.getLocalName(),l=r.getAttribute("id"),h=r.getAttribute("ref");if("repeat"==p&&(h=r.getAttribute("nodeset")),h){var c=h.indexOf("data:");c>=0&&(h=h.slice(5+c))}if(l){var d=this.id+"_"+i+"_"+l;h=h?this.nodeset+"[@"+this.options.repeatKey+"='"+i+"']/"+h:"";var g=null;"repeat"==p?(g=WebSquare.controlFactory.createByJSON(d,null,r._element,this.scope_obj,this.parentFrame)).options.nodeset=h:(g=WebSquare.controlFactory.createControl(d,{ref:h},r._element,this.scope_obj),this.parseChild(g,r,i)),t.addControl(g),this.repeatComponents[d]={},this.repeatComponents[d].repeatIndex=i,this.repeatIds[i]={},this.repeatIds[i].hashPreFix=this.id+"_"+i+"_",s.Z.getComponentById(d,this.scope_id).__repeat=this,u.q.extend(s.Z.getComponentById(d,this.scope_id),WebSquare.uiplugin.repeatAPI)}}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getRepeatChildren=function(t){try{for(var e=[],i=this.getChildrenCount(),n=0;n<i;n++){var o=this.id+"_"+n+"_"+t;e.push(s.Z.getComponentById(o,this.scope_id))}return e}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{this.init(t)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.init=function(t){try{t=u.q.extend({excludePlugin:"",excludeId:"",fireEvent:!1},t||{});for(var e=this.getChildren(),i=0;i<e.length;i++)e[i].setInitValue&&-1==(" "+t.excludePlugin+" ").indexOf(" "+e[i].options.pluginName+" ")&&-1==(" "+t.excludeId+" ").indexOf(" "+e[i].id+" ")&&e[i].setInitValue(t)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.invoke=function(t,e,i,n){try{return l.q.prototype.invoke.call(this,t,e,i,n)}catch(t){a.Y.printStackTrace(t,null,this)}}}}]);